"use strict";(self.webpackChunkmobilecomm=self.webpackChunkmobilecomm||[]).push([[4721],{88845:(e,t,a)=>{a.d(t,{Z:()=>d});var l=a(72791),n=a(5574),i=a(39157),r=a(64554),o=a(63571),s=a(80184);const d=()=>{const[e,t]=(0,l.useState)(!1);return{loading:(0,l.useMemo)((()=>(0,s.jsx)(n.Z,{open:e,BackdropProps:{style:{backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(3px)"}},keepMounted:!0,children:(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(r.Z,{style:{padding:20,display:"flex",justifyContent:"center"}}),(0,s.jsx)(r.Z,{style:{textAlign:"center"},children:(0,s.jsx)(o.Z,{pulse:!0,style:{fontSize:"100px",color:"#232455"}})}),(0,s.jsx)(r.Z,{style:{margin:"10px 0px 10px 0px",fontWeight:"bolder"},children:"DATA UNDER PROCESSING..."})]})})),[e]),action:e=>{t(e)}}}},30204:(e,t,a)=>{a.d(t,{u:()=>o});var l=a(72791),n=a(31243),i=a(44997),r=a(61982);const o=e=>{const[t,a]=(0,l.useState)(!1),[o,s]=(0,l.useState)(null),[d,p]=(0,l.useState)(null),[c,h]=(0,l.useState)(null),[x,u]=(0,l.useState)(0),g=()=>{c&&c.cancel()};return(0,l.useEffect)((()=>g),[]),{isLoading:t,error:o,response:d,makePostRequest:async(t,l)=>{a(!0),s(null),p(null);const d=n.Z.CancelToken.source();h(d);try{const a=await n.Z.post("".concat(i.hN,"/").concat(t),l,{...e,cancelToken:d.token,headers:{Authorization:"token ".concat((0,r.b)("tokenKey"))}});return p(a),await a.data}catch(o){return n.Z.isCancel(o)?(console.log("Request canceled"),!1):(s(o),console.log("error",o),!1)}finally{a(!1)}},cancelRequest:g}}},74721:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var l=a(72791),n=(a(30550),a(43623)),i=a(13838),r=a(81213),o=a(80429),s=a(46420),d=a.n(s),p=a(39281),c=a(4841),h=a(44997),x=a(60585),u=a(50168),g=a(40630),y=a(70320),w=a(5536),b=a(5574),m=a(55931),S=a(12998),j=a(30204),v=a(88845),k=a(3984),f=a(65661),C=a(90977),_=a(29823),Z=(a(763),a(73518)),R=a(97639),D=a(25415),O=a(39157),P=a(80184);const E=l.forwardRef((function(e,t){return(0,P.jsx)(m.Z,{direction:"down",timeout:2500,style:{transformOrigin:"0 0 0"},mountOnEnter:!0,unmountOnExit:!0,ref:t,...e})})),I=()=>{const e=(0,l.useRef)(null),t=(0,S.y)(),[a,s]=(0,l.useState)(!1),[m,I]=(0,l.useState)(!1),[z,F]=(0,l.useState)(!1),{makePostRequest:A}=(0,j.u)(),{loading:T,action:W}=(0,v.Z)(),[L,N]=(0,l.useState)([]),[q,U]=(0,l.useState)([]),[B,M]=(0,l.useState)([]),[K,G]=(0,l.useState)(""),[H,Q]=(0,l.useState)(""),[Y,$]=(0,l.useState)([]),{isPending:J,isFetching:V,isError:X,data:ee,error:te,refetch:ae}=(0,k.a)({queryKey:["PayloadDip_MasterDashboard"],queryFn:async()=>{W(J);var e=new FormData;e.append("to_date",H),e.append("from_date",K);try{const t=await A("Zero_Count_Rna_Payload_Tool/circle_wise_open_close_dashboard/",e);return W(!1),t?(console.log("Payload Dip data res",t),G(t.from_date),Q(t.to_date),M(t.result.map((e=>Object.keys(e)[0]))),N(t.result.map((e=>Object.values(e)[0].OPEN))),U(t.result.map((e=>Object.values(e)[0].CLOSE))),t):{}}catch(te){return W(!1),console.error("Error fetching data:",te),{}}},staleTime:1e5,refetchOnReconnect:!1});let le;const ne=e=>{let t=new Date(e);const a=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(l,"-").concat(a)},ie={labels:B,datasets:[{label:"OPEN",data:L,borderColor:"rgb(136, 214, 108)",backgroundColor:["rgb(136, 214, 108)"],borderWidth:3,borderRadius:5,fill:!1,tension:.4},{label:"CLOSE",data:q,borderColor:"rgb(198, 60, 81)",backgroundColor:["rgb(198, 60, 81)"],borderWidth:3,borderRadius:5,color:"red",fill:!1,tension:.4}]},re={labels:B,datasets:[{label:"OPEN",data:L,borderColor:"black",backgroundColor:["rgb(136, 214, 108,0.7)"],borderWidth:1,borderRadius:10,cursor:"pointer",fill:!0,tension:.4},{label:"CLOSE",data:q,borderColor:"black",backgroundColor:["rgb(198, 60, 81,0.8)"],borderWidth:1,borderRadius:10,cursor:"pointer",color:"red",fill:!0,tension:.4}]},oe={responsive:!0,maintainApectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"bottom",labels:{font:{size:13},boxWidth:18}},title:{display:!0,text:"Payload Dip Status ( ".concat(ne(K)," ~ ").concat(ne(H)," )"),font:{size:16,weight:"bold"}},datalabels:{display:!0,color:"black",anchor:"end",align:"top",offset:.5,font:{size:12,weight:"bold"}},zoom:{zoom:{wheel:{enabled:!0,speed:.01},pinch:{enabled:!0,speed:.01},mode:"x"},pan:{enabled:!0,mode:"x"}}},scales:{x:{grid:{display:!1},ticks:{}},y:{grid:{display:!0},ticks:{stepSize:1}}},watermark:{image:"".concat(h.hN,"/media/assets/logo-new.png"),x:50,y:50,width:300,height:150,opacity:.25,alignX:"right",alignY:"top",alignToChartArea:!1,position:"back"},animation:{onComplete:()=>{le=!0},delay:e=>{let t=0;return"data"!==e.type||"default"!==e.mode||le||(t=300*e.dataIndex+100*e.datasetIndex),t}}},se=()=>{I(!1),F(!1)};(0,l.useEffect)((()=>{const t=e.current;t&&(t.canvas.onclick=function(e){const a=t.getElementsAtEventForMode(e,"nearest",{intersect:!0},!0);if(a.length>0){const e=a[0],l=t.data.labels[e.index],n=t.data.datasets[e.datasetIndex].label,i=t.data.datasets[e.datasetIndex].data[e.index];console.log("circle:",l),console.log("status:",n),console.log("Value:",i);const r=null===ee||void 0===ee?void 0:ee.data.filter((e=>e.Circle===l&&e.Status===n));$(r),F(!0)}})}),[re]);const de=(0,l.useCallback)((()=>(0,P.jsx)(b.Z,{fullWidth:!0,maxWidth:"lg",TransitionComponent:E,open:m,onClose:se,children:(0,P.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[(0,P.jsx)("div",{style:{display:a?"none":"inherit",filter:"drop-shadow(rgba(0, 0, 0, 0.34) 0px 3px 3px)",width:"1100px",height:"600px"},children:(0,P.jsx)(n.$Q,{ref:e,data:re,options:oe,plugins:[r.Z,o.ZP,d()]})}),(0,P.jsx)("div",{style:{display:a?"inherit":"none",filter:"drop-shadow(rgba(0, 0, 0, 0.34) 0px 3px 3px)",width:"1100px",height:"600px"},children:(0,P.jsx)(n.x1,{data:ie,options:oe,plugins:[r.Z,o.ZP,d()]})})]})})),[m]),pe=(0,l.useCallback)((()=>(0,P.jsxs)(b.Z,{fullWidth:!0,maxWidth:"xl",TransitionComponent:E,open:z,onClose:se,children:[(0,P.jsxs)(f.Z,{children:[(0,P.jsx)(R.Z,{title:"Raw Data",children:(0,P.jsx)(C.Z,{onClick:()=>{(()=>{const e=new D.Workbook,t=e.addWorksheet("Payload Dip",{properties:{tabColor:{argb:"f1948a"}}});t.getCell("A1").value="Ticket ID",t.getCell("B1").value="Circle",t.getCell("C1").value="Cell Name",t.getCell("C1").value="Date",t.getCell("D1").value="Open Date",t.getCell("E1").value="Aging",t.getCell("F1").value="Priority",t.getCell("G1").value="Status",t.getCell("H1").value="Circle Spoc",t.getCell("I1").value="Site ID",t.getCell("J1").value="Remarks",t.getCell("K1").value="Ownership",t.getCell("L1").value="Pre Remarks",t.columns=[{key:"ticket_id"},{key:"Circle"},{key:"Short_name"},{key:"Open_Date"},{key:"aging"},{key:"priority"},{key:"Status"},{key:"Site_ID"},{key:"Remarks"},{key:"Ownership"},{key:"Pre_Remarks"}],null===Y||void 0===Y||Y.map((e=>{t.addRow({ticket_id:null===e||void 0===e?void 0:e.ticket_id,Circle:null===e||void 0===e?void 0:e.Circle,Short_name:null===e||void 0===e?void 0:e.Short_name,Date:null===e||void 0===e?void 0:e.Date,Open_Date:null===e||void 0===e?void 0:e.Open_Date,aging:null===e||void 0===e?void 0:e.aging,priority:null===e||void 0===e?void 0:e.priority,Status:null===e||void 0===e?void 0:e.Status,Circle_Spoc:null===e||void 0===e?void 0:e.Circle_Spoc,Site_ID:null===e||void 0===e?void 0:e.Site_ID,Remarks:null===e||void 0===e?void 0:e.Remarks,Ownership:null===e||void 0===e?void 0:e.Ownership,Pre_Remarks:null===e||void 0===e?void 0:e.Pre_Remarks})})),t.eachRow({includeEmpty:!0},((e,a)=>{t.getColumn(1)._worksheet._rows.length,e.eachCell({includeEmpty:!0},(e=>{e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},1===a&&(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"223354"}},e.font={color:{argb:"FFFFFF"},bold:!0,size:12},e.views=[{state:"frozen",ySplit:1}])}))})),e.xlsx.writeBuffer().then((e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheet.sheet"}),a=window.URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download="Payload_Dip_Tracker.xlsx",l.click(),window.URL.revokeObjectURL(a)}))})()},children:(0,P.jsx)(Z.Z,{fontSize:"medium",color:"primary"})})}),(0,P.jsx)("span",{style:{float:"right"},children:(0,P.jsx)(C.Z,{size:"large",onClick:se,children:(0,P.jsx)(_.Z,{})})})]}),(0,P.jsx)(O.Z,{children:(0,P.jsx)(p.Z,{sx:{maxHeight:"70vh",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px"},component:c.Z,children:(0,P.jsxs)("table",{style:{width:"100%",border:"1px solid black",borderCollapse:"collapse",overflow:"auto"},children:[(0,P.jsx)("thead",{style:{position:"sticky",top:0,zIndex:1},children:(0,P.jsxs)("tr",{style:{fontSize:15,backgroundColor:"#223354",color:"white",border:"1px solid white"},children:[(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"S.No."}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Ticket ID "}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Circle "}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Cell Name"}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Date"}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Open Date"}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Aging"}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Priority "}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Status"}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Circle Spoc"}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Site ID "}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Remarks"}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Ownership"}),(0,P.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Pre Remarks"})]})}),(0,P.jsx)("tbody",{children:Y&&Y.map(((e,a)=>(0,P.jsxs)("tr",{className:t.hover,style:{textAlign:"center",fontWeigth:700},children:[(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:a+1}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.ticket_id}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Circle}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Short_name}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Date}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Open_Date}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.aging}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.priority}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap",cursor:"pointer"},children:"nan"==e.Status?"":e.Status}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Circle_Spoc}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Site_ID}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:"nan"==e.Remarks?"":e.Remarks}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:"nan"==e.Ownership?"":e.Ownership}),(0,P.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:"nan"==e.Pre_Remarks?"":e.Pre_Remarks})]},a)))})]})})})]})),[z]);return(0,l.useEffect)((()=>{ee&&(G(ee.from_date),Q(ee.to_date),M(ee.result.map((e=>Object.keys(e)[0]))),N(ee.result.map((e=>Object.values(e)[0].OPEN))),U(ee.result.map((e=>Object.values(e)[0].CLOSE)))),document.title="".concat(window.location.pathname.slice(1).replaceAll("_"," ").replaceAll("/"," | ").toUpperCase())}),[]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("style",{children:"th{border:1px solid black;}"}),(0,P.jsxs)("div",{style:{margin:10,boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",padding:10,height:"auto",width:"98%",borderRadius:10,backgroundColor:"white",display:"flex",justifyContent:"space-around",alignItems:"center"},children:[(0,P.jsxs)("div",{style:{width:200,height:350,borderRadius:5,padding:10,boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[(0,P.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:"18px",fontWeight:"bold",color:"black"},children:[(0,P.jsx)(x.Z,{}),"FILTER DATA"]}),(0,P.jsxs)("div",{children:[(0,P.jsx)(u.Z,{style:{fontSize:15},children:"Select From Date"}),(0,P.jsx)("input",{type:"date",value:K,onChange:async e=>{await G(e.target.value),await ae()}})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)(u.Z,{style:{fontSize:15},children:"Select To Date"}),(0,P.jsx)("input",{type:"date",value:H,onChange:async e=>{await Q(e.target.value),await ae()}})]}),(0,P.jsx)("div",{children:(0,P.jsxs)(y.Z,{size:"small",color:"primary",value:a,exclusive:!0,onChange:()=>{s(!a)},"aria-label":"Platform",children:[(0,P.jsx)(g.Z,{value:!0,children:"Line"}),(0,P.jsx)(g.Z,{value:!1,children:"Bar"})]})}),(0,P.jsx)("div",{children:(0,P.jsx)(i.Z,{color:"primary",endIcon:(0,P.jsx)(w.Z,{}),onClick:()=>{I(!0)},children:"Full screen"})})]}),(0,P.jsx)("div",{style:{display:a?"inherit":"none",filter:"drop-shadow(rgba(0, 0, 0, 0.34) 0px 3px 3px)",width:"800px",height:400},children:(0,P.jsx)(n.x1,{ref:e,data:ie,options:oe,plugins:[r.Z,o.ZP,d()]})}),(0,P.jsx)("div",{style:{display:a?"none":"inherit",filter:"drop-shadow(rgba(0, 0, 0, 0.34) 0px 3px 3px)",width:"80hv",height:400},children:(0,P.jsx)(n.$Q,{ref:e,data:re,options:oe,plugins:[r.Z,o.ZP,d()]})}),de(),pe(),T]})]})}}}]);
//# sourceMappingURL=4721.e7659966.chunk.js.map