"use strict";(self.webpackChunkmobilecomm=self.webpackChunkmobilecomm||[]).push([[5738],{88845:(e,t,a)=>{a.d(t,{Z:()=>d});var l=a(72791),n=a(5574),i=a(39157),o=a(64554),r=a(63571),s=a(80184);const d=()=>{const[e,t]=(0,l.useState)(!1);return{loading:(0,l.useMemo)((()=>(0,s.jsx)(n.Z,{open:e,BackdropProps:{style:{backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(3px)"}},keepMounted:!0,children:(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(o.Z,{style:{padding:20,display:"flex",justifyContent:"center"}}),(0,s.jsx)(o.Z,{style:{textAlign:"center"},children:(0,s.jsx)(r.Z,{pulse:!0,style:{fontSize:"100px",color:"#232455"}})}),(0,s.jsx)(o.Z,{style:{margin:"10px 0px 10px 0px",fontWeight:"bolder"},children:"DATA UNDER PROCESSING..."})]})})),[e]),action:e=>{t(e)}}}},30204:(e,t,a)=>{a.d(t,{u:()=>r});var l=a(72791),n=a(31243),i=a(44997),o=a(61982);const r=e=>{const[t,a]=(0,l.useState)(!1),[r,s]=(0,l.useState)(null),[d,c]=(0,l.useState)(null),[p,h]=(0,l.useState)(null),[x,u]=(0,l.useState)(0),g=()=>{p&&p.cancel()};return(0,l.useEffect)((()=>g),[]),{isLoading:t,error:r,response:d,makePostRequest:async(t,l)=>{a(!0),s(null),c(null);const d=n.Z.CancelToken.source();h(d);try{const a=await n.Z.post("".concat(i.hN,"/").concat(t),l,{...e,cancelToken:d.token,headers:{Authorization:"token ".concat((0,o.b)("tokenKey"))}});return c(a),await a.data}catch(r){return n.Z.isCancel(r)?(console.log("Request canceled"),!1):(s(r),console.log("error",r),!1)}finally{a(!1)}},cancelRequest:g}}},5738:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var l=a(72791),n=(a(30550),a(43623)),i=a(13838),o=a(81213),r=a(80429),s=a(46420),d=a.n(s),c=a(39281),p=a(4841),h=a(44997),x=a(60585),u=a(50168),g=a(40630),y=a(70320),w=a(5536),m=a(5574),b=a(55931),j=a(12998),v=a(30204),S=a(88845),f=a(65661),C=a(90977),k=a(29823),_=(a(763),a(73518)),Z=a(97639),R=a(93517),D=a(50533),O=a(4567),P=a(57689),E=a(5397),z=a(23974),I=a(25415),A=a(39157),T=a(80184);const F=l.forwardRef((function(e,t){return(0,T.jsx)(b.Z,{direction:"down",timeout:2500,style:{transformOrigin:"0 0 0"},mountOnEnter:!0,unmountOnExit:!0,ref:t,...e})})),W=["P0","P1","P2"],N=()=>{const e=(0,l.useRef)(null),t=(0,j.y)(),a=(0,P.s0)(),[s,b]=(0,l.useState)(!1),[N,L]=(0,l.useState)(!1),[B,U]=(0,l.useState)(!1),{makePostRequest:q,cancelRequest:M}=(0,v.u)(),{loading:G,action:H}=(0,S.Z)(),[K,Q]=(0,l.useState)([]),[Y,$]=(0,l.useState)([]),[J,X]=(0,l.useState)([]),[V,ee]=(0,l.useState)(""),[te,ae]=(0,l.useState)(""),[le,ne]=(0,l.useState)([]),[ie,oe]=(0,l.useState)([]),[re,se]=(0,l.useState)(""),[de,ce]=(0,l.useState)(""),[pe,he]=(0,l.useState)(""),[xe,ue]=(0,l.useState)([]),[ge,ye]=(0,l.useState)([]),[we,me]=(0,l.useState)("");let be;const je=(0,l.useCallback)((async()=>{H(!0);var e=new FormData;e.append("to_date",te),e.append("from_date",V),e.append("priority",le),e.append("min_ageing",re),e.append("max_ageing",de),e.append("ticket_type","Payload");try{const t=await q("Zero_Count_Rna_Payload_Tool/circle_wise_open_close_dashboard/",e);H(!1),t?(ee(t.from_date),ae(t.to_date),se(t.min_ageing),ce(t.max_ageing),pe||(he(t.max_ageing),me(t.from_date)),X(t.result.map((e=>Object.keys(e)[0]))),Q(t.result.map((e=>Object.values(e)[0].OPEN))),$(t.result.map((e=>Object.values(e)[0].CLOSE))),ye(t.data),console.log(t)):console.log("error")}catch(t){return H(!1),console.error("Error fetching data:",t),{}}}),[V,te,le,re,de]),ve=e=>{let t=new Date(e);const a=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(l,"-").concat(a)},Se=e=>e.reduce(((e,t)=>e+t),0),fe={labels:J,datasets:[{label:"OPEN (".concat(Se(K),")"),data:K,borderColor:"#881E87",backgroundColor:["#881E87"],borderWidth:3,borderRadius:5,fill:!1,tension:.4},{label:"CLOSE (".concat(Se(Y),")"),data:Y,borderColor:"#006E74",backgroundColor:["#006E74"],borderWidth:3,borderRadius:5,color:"red",fill:!1,tension:.4}]},Ce={labels:J,datasets:[{label:"OPEN (".concat(Se(K),")"),data:K,borderColor:"black",backgroundColor:["rgb(136, 30, 135,0.7)"],borderWidth:.5,borderRadius:1,cursor:"pointer",fill:!0,tension:.4},{label:"CLOSE (".concat(Se(Y),")"),data:Y,borderColor:"black",backgroundColor:["rgb(0, 110, 116,0.7)"],borderWidth:.5,borderRadius:1,cursor:"pointer",color:"red",fill:!0,tension:.4}]},ke={responsive:!0,maintainApectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"bottom",labels:{font:{size:13},boxWidth:18}},title:{display:!0,text:"Payload Dip Status ( ".concat(ve(V)," ~ ").concat(ve(te)," ) Total : ").concat(Se(K)+Se(Y)," ").concat(le.length>0?"/ Priority : "+le:""," ").concat(ie.length>0?"/ Aging : "+ie:""),font:{size:16,weight:"bold"}},datalabels:{display:!0,color:"black",anchor:"end",align:"top",offset:.5,font:{size:12,weight:"bold"}},zoom:{zoom:{wheel:{enabled:!0,speed:.01},pinch:{enabled:!0,speed:.01},mode:"x"},pan:{enabled:!0,mode:"x"}}},scales:{x:{grid:{display:!1},ticks:{}},y:{grid:{display:!0},ticks:{stepSize:10}}},watermark:{image:"".concat(h.hN,"/media/assets/logo-new.png"),x:50,y:50,width:300,height:150,opacity:.25,alignX:"right",alignY:"top",alignToChartArea:!1,position:"back"},animation:{onComplete:()=>{be=!0},delay:e=>{let t=0;return"data"!==e.type||"default"!==e.mode||be||(t=300*e.dataIndex+100*e.datasetIndex),t}}},_e=()=>{L(!1),U(!1)};(0,l.useEffect)((()=>{const t=e.current;t&&(t.canvas.onclick=function(e){const a=t.getElementsAtEventForMode(e,"nearest",{intersect:!0},!0);if(a.length>0){const e=a[0],l=t.data.labels[e.index],n=t.data.datasets[e.datasetIndex].label,i=null===ge||void 0===ge?void 0:ge.filter((e=>e.Circle===l&&e.Status===n.split(" ")[0]));ue(i),U(!0)}})}),[Ce]);const Ze=(0,l.useCallback)((()=>(0,T.jsx)(m.Z,{fullWidth:!0,maxWidth:"lg",TransitionComponent:F,open:N,onClose:_e,children:(0,T.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[(0,T.jsx)("div",{style:{display:s?"none":"inherit",filter:"drop-shadow(rgba(0, 0, 0, 0.34) 0px 3px 3px)",width:"1100px",height:"600px"},children:(0,T.jsx)(n.$Q,{ref:e,data:Ce,options:ke,plugins:[o.Z,r.ZP,d()]})}),(0,T.jsx)("div",{style:{display:s?"inherit":"none",filter:"drop-shadow(rgba(0, 0, 0, 0.34) 0px 3px 3px)",width:"1100px",height:"600px"},children:(0,T.jsx)(n.x1,{data:fe,options:ke,plugins:[o.Z,r.ZP,d()]})})]})})),[N]),Re=(0,l.useCallback)((()=>(0,T.jsxs)(m.Z,{fullWidth:!0,maxWidth:"xl",TransitionComponent:F,open:B,onClose:_e,children:[(0,T.jsxs)(f.Z,{children:[(0,T.jsx)(Z.Z,{title:"Raw Data",children:(0,T.jsx)(C.Z,{onClick:()=>{(()=>{const e=new I.Workbook,t=e.addWorksheet("Payload Dip",{properties:{tabColor:{argb:"f1948a"}}});t.getCell("A1").value="Ticket ID",t.getCell("B1").value="Circle",t.getCell("C1").value="Cell Name",t.getCell("C1").value="Date",t.getCell("D1").value="Open Date",t.getCell("E1").value="Aging",t.getCell("F1").value="Priority",t.getCell("G1").value="Status",t.getCell("H1").value="Circle Spoc",t.getCell("I1").value="Site ID",t.getCell("J1").value="Remarks",t.getCell("K1").value="Ownership",t.getCell("L1").value="Pre Remarks",t.columns=[{key:"ticket_id"},{key:"Circle"},{key:"Short_name"},{key:"Open_Date"},{key:"aging"},{key:"priority"},{key:"Status"},{key:"Site_ID"},{key:"Remarks"},{key:"Ownership"},{key:"Pre_Remarks"}],null===xe||void 0===xe||xe.map((e=>{t.addRow({ticket_id:null===e||void 0===e?void 0:e.ticket_id,Circle:null===e||void 0===e?void 0:e.Circle,Short_name:null===e||void 0===e?void 0:e.Short_name,Date:null===e||void 0===e?void 0:e.Date,Open_Date:null===e||void 0===e?void 0:e.Open_Date,aging:null===e||void 0===e?void 0:e.aging,priority:null===e||void 0===e?void 0:e.priority,Status:null===e||void 0===e?void 0:e.Status,Circle_Spoc:null===e||void 0===e?void 0:e.Circle_Spoc,Site_ID:null===e||void 0===e?void 0:e.Site_ID,Remarks:null===e||void 0===e?void 0:e.Remarks,Ownership:null===e||void 0===e?void 0:e.Ownership,Pre_Remarks:null===e||void 0===e?void 0:e.Pre_Remarks})})),t.eachRow({includeEmpty:!0},((e,a)=>{t.getColumn(1)._worksheet._rows.length,e.eachCell({includeEmpty:!0},(e=>{e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},1===a&&(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"223354"}},e.font={color:{argb:"FFFFFF"},bold:!0,size:12},e.views=[{state:"frozen",ySplit:1}])}))})),e.xlsx.writeBuffer().then((e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheet.sheet"}),a=window.URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download="Payload_Dip_Tracker.xlsx",l.click(),window.URL.revokeObjectURL(a)}))})()},children:(0,T.jsx)(_.Z,{fontSize:"medium",color:"primary"})})}),(0,T.jsx)("span",{style:{float:"right"},children:(0,T.jsx)(C.Z,{size:"large",onClick:_e,children:(0,T.jsx)(k.Z,{})})})]}),(0,T.jsx)(A.Z,{children:(0,T.jsx)(c.Z,{sx:{maxHeight:"70vh",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px"},component:p.Z,children:(0,T.jsxs)("table",{style:{width:"100%",border:"1px solid black",borderCollapse:"collapse",overflow:"auto"},children:[(0,T.jsx)("thead",{style:{position:"sticky",top:0,zIndex:1},children:(0,T.jsxs)("tr",{style:{fontSize:15,backgroundColor:"#223354",color:"white",border:"1px solid white"},children:[(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"S.No."}),(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Ticket ID "}),(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Circle "}),(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Cell Name"}),(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Date"}),(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Open Date"}),(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Aging"}),(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Priority "}),(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Status"}),(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Circle Spoc"}),(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Site ID "}),(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Remarks"}),(0,T.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Ownership"})]})}),(0,T.jsx)("tbody",{children:xe&&(null===xe||void 0===xe?void 0:xe.map(((e,a)=>(0,T.jsxs)("tr",{className:t.hover,style:{textAlign:"center",fontWeigth:700},children:[(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:a+1}),(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.ticket_id}),(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Circle}),(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Short_name}),(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Date}),(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Open_Date}),(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.aging}),(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.priority}),(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap",cursor:"pointer"},children:"nan"==e.Status?"":e.Status}),(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Circle_Spoc}),(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Site_ID}),(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:"nan"==e.Remarks?"":e.Remarks}),(0,T.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:"nan"==e.Ownership?"":e.Ownership})]},a))))})]})})})]})),[B]);return(0,l.useEffect)((()=>{je(),document.title="".concat(window.location.pathname.slice(1).replaceAll("_"," ").replaceAll("/"," | ").toUpperCase())}),[je]),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("style",{children:"th{border:1px solid black;}"}),(0,T.jsx)("div",{style:{margin:10},children:(0,T.jsxs)(R.Z,{"aria-label":"breadcrumb",itemsBeforeCollapse:2,maxItems:3,separator:(0,T.jsx)(E.Z,{fontSize:"small"}),children:[(0,T.jsx)(D.Z,{underline:"hover",onClick:()=>{a("/tools")},children:"Tools"}),(0,T.jsx)(D.Z,{underline:"hover",onClick:()=>{a("/tools/rca")},children:"RCA Tool"}),(0,T.jsx)(O.Z,{color:"text.primary",children:"Ticket Dashboard"})]})}),(0,T.jsxs)("div",{style:{margin:10,boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",padding:10,height:"auto",width:"98%",borderRadius:10,backgroundColor:"white",display:"flex",justifyContent:"space-around",alignItems:"center"},children:[(0,T.jsxs)("div",{style:{width:"30vh",height:400,borderRadius:5,padding:5,boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",backgroundColor:"rgb(247,247,241)"},children:[(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:"18px",fontWeight:"bold",color:"black"},children:[(0,T.jsx)(x.Z,{}),"FILTER DATA"]}),(0,T.jsxs)("div",{children:[(0,T.jsx)(u.Z,{style:{fontSize:15},children:"Select From Date"}),(0,T.jsx)("input",{type:"date",value:V,min:we,onChange:e=>ee(e.target.value)})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)(u.Z,{style:{fontSize:15},children:"Select To Date"}),(0,T.jsx)("input",{type:"date",value:te,onChange:e=>ae(e.target.value)})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)(u.Z,{style:{fontSize:15},children:"Select Aging"}),(0,T.jsxs)("div",{style:{width:125,height:25,borderRadius:2,border:"1px solid black",display:"flex",justifyContent:"space-between",placeItems:"center"},children:[(0,T.jsx)("div",{children:(0,T.jsx)("select",{className:t.custom_select,value:re,onChange:e=>se(e.target.value),children:Array.from({length:pe+1},((e,t)=>(0,T.jsx)("option",{value:t,children:t},t)))})}),(0,T.jsx)("div",{children:"To"}),(0,T.jsx)("div",{children:(0,T.jsx)("select",{className:t.custom_select,value:de,onChange:e=>ce(e.target.value),children:Array.from({length:pe+1},((e,t)=>(0,T.jsx)("option",{value:t,children:t},t)))})})]})]}),(0,T.jsx)("div",{children:(0,T.jsx)(z.Z,{label:"Priority",data:W.map((e=>({label:e,value:e}))),value:le,onChange:e=>{ne(e)},size:"sm",appearance:"default",placeholder:"",style:{width:130}})}),(0,T.jsx)("div",{children:(0,T.jsxs)(y.Z,{size:"small",color:"primary",value:s,exclusive:!0,onChange:()=>{b(!s)},"aria-label":"Platform",children:[(0,T.jsx)(g.Z,{value:!0,children:"Line"}),(0,T.jsx)(g.Z,{value:!1,children:"Bar"})]})}),(0,T.jsx)("div",{children:(0,T.jsx)(i.Z,{color:"primary",endIcon:(0,T.jsx)(w.Z,{}),onClick:()=>{L(!0)},children:"Full screen"})})]}),(0,T.jsx)("div",{style:{display:s?"inherit":"none",filter:"drop-shadow(rgba(0, 0, 0, 0.34) 0px 3px 3px)",width:"850px",height:450},children:(0,T.jsx)(n.x1,{ref:e,data:fe,options:ke,plugins:[o.Z,r.ZP,d()]})}),(0,T.jsx)("div",{style:{display:s?"none":"inherit",filter:"drop-shadow(rgba(0, 0, 0, 0.34) 0px 3px 3px)",width:"80hv",height:450},children:(0,T.jsx)(n.$Q,{ref:e,data:Ce,options:ke,plugins:[o.Z,r.ZP,d()]})}),N&&Ze(),Re(),G]})]})}}}]);
//# sourceMappingURL=5738.d8a3c93b.chunk.js.map