"use strict";(self.webpackChunkmobilecomm=self.webpackChunkmobilecomm||[]).push([[533],{40533:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var i=a(72791),l=(a(30550),a(43623)),n=a(13838),o=a(81213),r=a(80429),s=a(46420),d=a.n(s),p=a(39281),c=a(4841),h=a(44997),x=a(60585),g=a(50168),u=a(40630),w=a(70320),y=a(5536),m=a(5574),j=a(55931),v=a(12998),b=a(30204),S=a(88845),f=a(65661),C=a(90977),k=a(29823),_=(a(763),a(73518)),R=a(97639),Z=a(57689),D=a(25415),O=a(39157),E=a(80184);const I=i.forwardRef((function(e,t){return(0,E.jsx)(j.Z,{direction:"down",timeout:2500,style:{transformOrigin:"0 0 0"},mountOnEnter:!0,unmountOnExit:!0,ref:t,...e})})),P=()=>{const e=(0,i.useRef)(null),t=(0,v.y)(),[a,s]=((0,Z.s0)(),(0,i.useState)(!1)),[j,P]=(0,i.useState)(!1),[z,A]=(0,i.useState)(!1),{makePostRequest:F,cancelRequest:W}=(0,b.u)(),{loading:T,action:L}=(0,S.Z)(),[N,U]=(0,i.useState)([]),[B,q]=(0,i.useState)([]),[H,M]=(0,i.useState)([]),[Q,Y]=(0,i.useState)(""),[$,G]=(0,i.useState)(""),[J,K]=(0,i.useState)([]),[X,V]=(0,i.useState)([]),[ee,te]=(0,i.useState)(""),[ae,ie]=(0,i.useState)(""),[le,ne]=(0,i.useState)(""),[oe,re]=(0,i.useState)([]),[se,de]=(0,i.useState)([]);let pe;const ce=(0,i.useCallback)((async()=>{L(!0);var e=new FormData;e.append("to_date",$),e.append("from_date",Q),e.append("priority",J),e.append("min_ageing",ee),e.append("max_ageing",ae),e.append("ticket_type","Sleeping Cell");try{const t=await F("Zero_Count_Rna_Payload_Tool/circle_wise_open_close_dashboard/",e);L(!1),t?(Y(t.from_date),G(t.to_date),te(t.min_ageing),ie(t.max_ageing),le||ne(t.max_ageing),M(t.result.map((e=>Object.keys(e)[0]))),U(t.result.map((e=>Object.values(e)[0].OPEN))),q(t.result.map((e=>Object.values(e)[0].CLOSE))),de(t.data),console.log(t)):console.log("error")}catch(t){return L(!1),console.error("Error fetching data:",t),{}}}),[Q,$,J,ee,ae]),he=e=>{let t=new Date(e);const a=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return"".concat(l,"-").concat(i,"-").concat(a)},xe=e=>e.reduce(((e,t)=>e+t),0),ge={labels:H,datasets:[{label:"OPEN (".concat(xe(N),")"),data:N,borderColor:"#881E87",backgroundColor:["#881E87"],borderWidth:3,borderRadius:5,fill:!1,tension:.4},{label:"CLOSE (".concat(xe(B),")"),data:B,borderColor:"#006E74",backgroundColor:["#006E74"],borderWidth:3,borderRadius:5,color:"red",fill:!1,tension:.4}]},ue={labels:H,datasets:[{label:"OPEN (".concat(xe(N),")"),data:N,borderColor:"black",backgroundColor:["rgb(136, 30, 135,0.7)"],borderWidth:.5,borderRadius:1,cursor:"pointer",fill:!0,tension:.4},{label:"CLOSE (".concat(xe(B),")"),data:B,borderColor:"black",backgroundColor:["rgb(0, 110, 116,0.7)"],borderWidth:.5,borderRadius:1,cursor:"pointer",color:"red",fill:!0,tension:.4}]},we={responsive:!0,maintainApectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"bottom",labels:{font:{size:13},boxWidth:18}},title:{display:!0,text:"Sleeping Cell Status ( ".concat(he(Q)," ~ ").concat(he($)," ) Total : ").concat(xe(N)+xe(B)," ").concat(J.length>0?"/ Priority : "+J:""," ").concat(X.length>0?"/ Aging : "+X:""),font:{size:16,weight:"bold"}},datalabels:{display:!0,color:"black",anchor:"end",align:"top",offset:.5,font:{size:12,weight:"bold"}},zoom:{zoom:{wheel:{enabled:!0,speed:.01},pinch:{enabled:!0,speed:.01},mode:"x"},pan:{enabled:!0,mode:"x"}}},scales:{x:{grid:{display:!1},ticks:{}},y:{grid:{display:!0},ticks:{stepSize:1}}},watermark:{image:"".concat(h.hN,"/media/assets/logo-new.png"),x:50,y:50,width:300,height:150,opacity:.25,alignX:"right",alignY:"top",alignToChartArea:!1,position:"back"},animation:{onComplete:()=>{pe=!0},delay:e=>{let t=0;return"data"!==e.type||"default"!==e.mode||pe||(t=300*e.dataIndex+100*e.datasetIndex),t}}},ye=()=>{P(!1),A(!1)};(0,i.useEffect)((()=>{const t=e.current;t&&(t.canvas.onclick=function(e){const a=t.getElementsAtEventForMode(e,"nearest",{intersect:!0},!0);if(a.length>0){const e=a[0],i=t.data.labels[e.index],l=t.data.datasets[e.datasetIndex].label,n=null===se||void 0===se?void 0:se.filter((e=>e.Circle===i&&e.Status===l.split(" ")[0]));re(n),A(!0)}})}),[ue]);const me=(0,i.useCallback)((()=>(0,E.jsx)(m.Z,{fullWidth:!0,maxWidth:"lg",TransitionComponent:I,open:j,onClose:ye,children:(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[(0,E.jsx)("div",{style:{display:a?"none":"inherit",filter:"drop-shadow(rgba(0, 0, 0, 0.34) 0px 3px 3px)",width:"1100px",height:"600px"},children:(0,E.jsx)(l.$Q,{ref:e,data:ue,options:we,plugins:[o.Z,r.ZP,d()]})}),(0,E.jsx)("div",{style:{display:a?"inherit":"none",filter:"drop-shadow(rgba(0, 0, 0, 0.34) 0px 3px 3px)",width:"1100px",height:"600px"},children:(0,E.jsx)(l.x1,{data:ge,options:we,plugins:[o.Z,r.ZP,d()]})})]})})),[j]),je=(0,i.useCallback)((()=>(0,E.jsxs)(m.Z,{fullWidth:!0,maxWidth:"xl",TransitionComponent:I,open:z,onClose:ye,children:[(0,E.jsxs)(f.Z,{children:[(0,E.jsx)(R.Z,{title:"Raw Data",children:(0,E.jsx)(C.Z,{onClick:()=>{(()=>{const e=new D.Workbook,t=e.addWorksheet("Payload Dip",{properties:{tabColor:{argb:"f1948a"}}});t.getCell("A1").value="Ticket ID",t.getCell("B1").value="Circle",t.getCell("C1").value="Cell Name",t.getCell("C1").value="Date",t.getCell("D1").value="Open Date",t.getCell("E1").value="Aging",t.getCell("F1").value="Priority",t.getCell("G1").value="Status",t.getCell("H1").value="Circle Spoc",t.getCell("I1").value="Site ID",t.getCell("J1").value="Remarks",t.getCell("K1").value="Ownership",t.getCell("L1").value="Pre Remarks",t.columns=[{key:"ticket_id"},{key:"Circle"},{key:"Short_name"},{key:"Open_Date"},{key:"aging"},{key:"priority"},{key:"Status"},{key:"Site_ID"},{key:"Remarks"},{key:"Ownership"},{key:"Pre_Remarks"}],null===oe||void 0===oe||oe.map((e=>{t.addRow({ticket_id:null===e||void 0===e?void 0:e.ticket_id,Circle:null===e||void 0===e?void 0:e.Circle,Short_name:null===e||void 0===e?void 0:e.Short_name,Date:null===e||void 0===e?void 0:e.Date,Open_Date:null===e||void 0===e?void 0:e.Open_Date,aging:null===e||void 0===e?void 0:e.aging,priority:null===e||void 0===e?void 0:e.priority,Status:null===e||void 0===e?void 0:e.Status,Circle_Spoc:null===e||void 0===e?void 0:e.Circle_Spoc,Site_ID:null===e||void 0===e?void 0:e.Site_ID,Remarks:null===e||void 0===e?void 0:e.Remarks,Ownership:null===e||void 0===e?void 0:e.Ownership,Pre_Remarks:null===e||void 0===e?void 0:e.Pre_Remarks})})),t.eachRow({includeEmpty:!0},((e,a)=>{t.getColumn(1)._worksheet._rows.length,e.eachCell({includeEmpty:!0},(e=>{e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},1===a&&(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"223354"}},e.font={color:{argb:"FFFFFF"},bold:!0,size:12},e.views=[{state:"frozen",ySplit:1}])}))})),e.xlsx.writeBuffer().then((e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheet.sheet"}),a=window.URL.createObjectURL(t),i=document.createElement("a");i.href=a,i.download="Payload_Dip_Tracker.xlsx",i.click(),window.URL.revokeObjectURL(a)}))})()},children:(0,E.jsx)(_.Z,{fontSize:"medium",color:"primary"})})}),(0,E.jsx)("span",{style:{float:"right"},children:(0,E.jsx)(C.Z,{size:"large",onClick:ye,children:(0,E.jsx)(k.Z,{})})})]}),(0,E.jsx)(O.Z,{children:(0,E.jsx)(p.Z,{sx:{maxHeight:"70vh",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px"},component:c.Z,children:(0,E.jsxs)("table",{style:{width:"100%",border:"1px solid black",borderCollapse:"collapse",overflow:"auto"},children:[(0,E.jsx)("thead",{style:{position:"sticky",top:0,zIndex:1},children:(0,E.jsxs)("tr",{style:{fontSize:15,backgroundColor:"#223354",color:"white",border:"1px solid white"},children:[(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"S.No."}),(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Ticket ID "}),(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Circle "}),(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Cell Name"}),(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Date"}),(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Open Date"}),(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Aging"}),(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Priority "}),(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Status"}),(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Circle Spoc"}),(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Site ID "}),(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Remarks"}),(0,E.jsx)("th",{style:{padding:"5px 10px",whiteSpace:"nowrap"},children:"Ownership"})]})}),(0,E.jsx)("tbody",{children:oe&&(null===oe||void 0===oe?void 0:oe.map(((e,a)=>(0,E.jsxs)("tr",{className:t.hover,style:{textAlign:"center",fontWeigth:700},children:[(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:a+1}),(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.ticket_id}),(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Circle}),(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Short_name}),(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Date}),(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Open_Date}),(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.aging}),(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.priority}),(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap",cursor:"pointer"},children:"nan"==e.Status?"":e.Status}),(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Circle_Spoc}),(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:e.Site_ID}),(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:"nan"==e.Remarks?"":e.Remarks}),(0,E.jsx)("th",{style:{padding:"5px 20px",whiteSpace:"nowrap"},children:"nan"==e.Ownership?"":e.Ownership})]},a))))})]})})})]})),[z]);return(0,i.useEffect)((()=>{ce(),document.title="".concat(window.location.pathname.slice(1).replaceAll("_"," ").replaceAll("/"," | ").toUpperCase())}),[ce]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("style",{children:"th{border:1px solid black;}"}),(0,E.jsxs)("div",{style:{margin:10,boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",padding:10,height:"auto",width:"98%",borderRadius:10,backgroundColor:"white",display:"flex",justifyContent:"space-around",alignItems:"center"},children:[(0,E.jsxs)("div",{style:{width:"30vh",height:400,borderRadius:5,padding:5,boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",backgroundColor:"rgb(247,247,241)"},children:[(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:"18px",fontWeight:"bold",color:"black"},children:[(0,E.jsx)(x.Z,{}),"FILTER DATA"]}),(0,E.jsxs)("div",{children:[(0,E.jsx)(g.Z,{style:{fontSize:15},children:"Select From Date"}),(0,E.jsx)("input",{type:"date",value:Q,onChange:e=>Y(e.target.value)})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)(g.Z,{style:{fontSize:15},children:"Select To Date"}),(0,E.jsx)("input",{type:"date",value:$,onChange:e=>G(e.target.value)})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)(g.Z,{style:{fontSize:15},children:"Select Aging"}),(0,E.jsxs)("div",{style:{width:125,height:25,borderRadius:2,border:"1px solid black",display:"flex",justifyContent:"space-between",placeItems:"center"},children:[(0,E.jsx)("div",{children:(0,E.jsx)("select",{className:t.custom_select,value:ee,onChange:e=>te(e.target.value),children:Array.from({length:le+1},((e,t)=>(0,E.jsx)("option",{value:t,children:t},t)))})}),(0,E.jsx)("div",{children:"To"}),(0,E.jsx)("div",{children:(0,E.jsx)("select",{className:t.custom_select,value:ae,onChange:e=>ie(e.target.value),children:Array.from({length:le+1},((e,t)=>(0,E.jsx)("option",{value:t,children:t},t)))})})]})]}),(0,E.jsx)("div",{}),(0,E.jsx)("div",{children:(0,E.jsxs)(w.Z,{size:"small",color:"primary",value:a,exclusive:!0,onChange:()=>{s(!a)},"aria-label":"Platform",children:[(0,E.jsx)(u.Z,{value:!0,children:"Line"}),(0,E.jsx)(u.Z,{value:!1,children:"Bar"})]})}),(0,E.jsx)("div",{children:(0,E.jsx)(n.Z,{color:"primary",endIcon:(0,E.jsx)(y.Z,{}),onClick:()=>{P(!0)},children:"Full screen"})})]}),(0,E.jsx)("div",{style:{display:a?"inherit":"none",filter:"drop-shadow(rgba(0, 0, 0, 0.34) 0px 3px 3px)",width:"850px",height:450},children:(0,E.jsx)(l.x1,{ref:e,data:ge,options:we,plugins:[o.Z,r.ZP,d()]})}),(0,E.jsx)("div",{style:{display:a?"none":"inherit",filter:"drop-shadow(rgba(0, 0, 0, 0.34) 0px 3px 3px)",width:"80hv",height:450},children:(0,E.jsx)(l.$Q,{ref:e,data:ue,options:we,plugins:[o.Z,r.ZP,d()]})}),j&&me(),je(),T]})]})};var z=a(5738);const A=()=>{const[e,t]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{document.title="".concat(window.location.pathname.slice(1).replaceAll("_"," ").replaceAll("/"," | ").toUpperCase()),t(!0)}),[]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{children:e&&(0,E.jsx)(z.default,{})}),(0,E.jsx)("div",{children:e&&(0,E.jsx)(P,{})})]})}}}]);
//# sourceMappingURL=533.30f4c759.chunk.js.map